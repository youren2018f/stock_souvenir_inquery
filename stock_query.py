import streamlit as st
import pandas as pd


import pandas as pd
website_path = "https://histock.tw/stock/gift.aspx"
valid_stocks = pd.read_html(website_path,attrs = {'id': 'CPHB1_gvToday'})[0]
#最新公佈的id為CPHB1_gvToday，未過最後買進的id為CPHB1_gv，已過最後買進的的id為CPHB1_gvOld



pd.options.display.max_columns = None
pd.options.display.max_rows = None

sub_stocks = valid_stocks[["代號", "名稱","股價","股東會紀念品"]]

new =sub_stocks.set_index("代號")
new["股東會紀念品"] = new["股東會紀念品"].str.replace("參考圖", "") #將最後的參考圖字樣去除


check_list = []
for i in range(len(sub_stocks)) :
    check_list.append(sub_stocks.loc[i, "代號"])

# text_input  = st.text_input('請輸入股號，多個股號以空白間隔')


# query = text_input.split()
# query = list(map(int, query))
#產生所有持股的字典
youren_owings = [1101,
 1102,
 1103,
 1104,
 1110,
 1201,
 1203,
 1210,
 1213,
 1215,
 1216,
 1217,
 1218,
 1219,
 1220,
 1225,
 1227,
 1229,
 1231,
 1232,
 1233,
 1234,
 1235,
 1236,
 1259,
 1264,
 1268,
 1301,
 1303,
 1304,
 1305,
 1307,
 1308,
 1309,
 1310,
 1312,
 1313,
 1314,
 1316,
 1319,
 1321,
 1323,
 1324,
 1325,
 1326,
 1333,
 1336,
 1338,
 1339,
 1340,
 1341,
 1402,
 1409,
 1413,
 1414,
 1416,
 1418,
 1419,
 1432,
 1434,
 1435,
 1436,
 1437,
 1439,
 1440,
 1441,
 1442,
 1443,
 1444,
 1445,
 1446,
 1447,
 1451,
 1452,
 1453,
 1454,
 1455,
 1456,
 1457,
 1459,
 1463,
 1464,
 1465,
 1466,
 1467,
 1468,
 1469,
 1470,
 1471,
 1473,
 1474,
 1475,
 1476,
 1477,
 1503,
 1504,
 1506,
 1507,
 1512,
 1513,
 1514,
 1515,
 1516,
 1517,
 1519,
 1521,
 1522,
 1525,
 1526,
 1527,
 1528,
 1530,
 1531,
 1532,
 1533,
 1535,
 1536,
 1537,
 1539,
 1540,
 1541,
 1558,
 1560,
 1568,
 1569,
 1570,
 1580,
 1582,
 1583,
 1584,
 1586,
 1593,
 1595,
 1597,
 1598,
 1599,
 1603,
 1604,
 1605,
 1608,
 1609,
 1611,
 1612,
 1614,
 1615,
 1616,
 1617,
 1701,
 1702,
 1707,
 1708,
 1710,
 1711,
 1712,
 1713,
 1714,
 1717,
 1718,
 1720,
 1721,
 1722,
 1723,
 1725,
 1726,
 1727,
 1730,
 1731,
 1732,
 1733,
 1734,
 1735,
 1736,
 1737,
 1742,
 1752,
 1760,
 1762,
 1773,
 1776,
 1777,
 1783,
 1784,
 1785,
 1786,
 1788,
 1789,
 1795,
 1796,
 1799,
 1802,
 1805,
 1806,
 1808,
 1809,
 1810,
 1813,
 1815,
 1817,
 1903,
 1904,
 1905,
 1906,
 1907,
 1909,
 2002,
 2007,
 2008,
 2009,
 2010,
 2012,
 2013,
 2014,
 2015,
 2017,
 2020,
 2023,
 2024,
 2025,
 2027,
 2028,
 2029,
 2030,
 2031,
 2032,
 2033,
 2034,
 2035,
 2038,
 2049,
 2059,
 2062,
 2063,
 2065,
 2066,
 2067,
 2069,
 2101,
 2102,
 2103,
 2104,
 2105,
 2108,
 2109,
 2211,
 2233,
 2246,
 2301,
 2302,
 2303,
 2305,
 2308,
 2312,
 2313,
 2314,
 2316,
 2323,
 2324,
 2327,
 2328,
 2329,
 2331,
 2332,
 2337,
 2338,
 2340,
 2342,
 2344,
 2345,
 2347,
 2348,
 2349,
 2351,
 2352,
 2353,
 2354,
 2355,
 2356,
 2357,
 2358,
 2359,
 2360,
 2362,
 2363,
 2365,
 2367,
 2368,
 2369,
 2371,
 2373,
 2374,
 2376,
 2377,
 2379,
 2380,
 2382,
 2383,
 2385,
 2388,
 2390,
 2392,
 2393,
 2395,
 2397,
 2399,
 2401,
 2402,
 2405,
 2406,
 2408,
 2409,
 2413,
 2414,
 2415,
 2419,
 2420,
 2421,
 2423,
 2425,
 2426,
 2427,
 2428,
 2430,
 2431,
 2433,
 2439,
 2440,
 2441,
 2443,
 2444,
 2449,
 2450,
 2451,
 2453,
 2454,
 2455,
 2457,
 2459,
 2460,
 2461,
 2462,
 2464,
 2465,
 2466,
 2467,
 2468,
 2471,
 2472,
 2474,
 2475,
 2476,
 2477,
 2478,
 2480,
 2484,
 2485,
 2486,
 2488,
 2491,
 2492,
 2493,
 2495,
 2496,
 2497,
 2498,
 2499,
 2501,
 2506,
 2511,
 2515,
 2516,
 2520,
 2524,
 2527,
 2528,
 2530,
 2534,
 2535,
 2536,
 2537,
 2538,
 2539,
 2540,
 2542,
 2543,
 2545,
 2546,
 2547,
 2548,
 2597,
 2601,
 2603,
 2605,
 2606,
 2607,
 2608,
 2609,
 2610,
 2611,
 2612,
 2613,
 2615,
 2616,
 2617,
 2618,
 2633,
 2634,
 2636,
 2641,
 2642,
 2701,
 2702,
 2704,
 2705,
 2706,
 2707,
 2712,
 2722,
 2727,
 2739,
 2758,
 2801,
 2820,
 2832,
 2834,
 2841,
 2855,
 2880,
 2883,
 2884,
 2885,
 2889,
 2890,
 2891,
 2892,
 2904,
 2911,
 2913,
 2929,
 3004,
 3006,
 3011,
 3018,
 3019,
 3023,
 3027,
 3029,
 3032,
 3033,
 3035,
 3036,
 3041,
 3042,
 3043,
 3046,
 3048,
 3049,
 3050,
 3056,
 3057,
 3059,
 3060,
 3118,
 3122,
 3128,
 3131,
 3149,
 3163,
 3164,
 3169,
 3176,
 3191,
 3202,
 3205,
 3206,
 3211,
 3213,
 3217,
 3218,
 3221,
 3224,
 3226,
 3227,
 3228,
 3230,
 3234,
 3236,
 3252,
 3257,
 3260,
 3264,
 3265,
 3268,
 3272,
 3276,
 3284,
 3285,
 3287,
 3289,
 3290,
 3293,
 3294,
 3296,
 3297,
 3303,
 3305,
 3306,
 3311,
 3312,
 3313,
 3317,
 3321,
 3322,
 3323,
 3324,
 3325,
 3332,
 3338,
 3346,
 3354,
 3356,
 3360,
 3362,
 3363,
 3373,
 3374,
 3376,
 3379,
 3380,
 3388,
 3390,
 3402,
 3416,
 3419,
 3426,
 3431,
 3432,
 3434,
 3437,
 3441,
 3444,
 3450,
 3454,
 3455,
 3465,
 3466,
 3479,
 3481,
 3483,
 3484,
 3489,
 3490,
 3491,
 3494,
 3498,
 3499,
 3501,
 3504,
 3508,
 3511,
 3515,
 3516,
 3518,
 3519,
 3521,
 3522,
 3527,
 3528,
 3531,
 3535,
 3536,
 3537,
 3540,
 3541,
 3545,
 3546,
 3548,
 3550,
 3551,
 3552,
 3556,
 3564,
 3567,
 3576,
 3577,
 3580,
 3583,
 3587,
 3588,
 3591,
 3593,
 3594,
 3596,
 3605,
 3607,
 3609,
 3615,
 3617,
 3622,
 3623,
 3624,
 3625,
 3627,
 3628,
 3630,
 3631,
 3642,
 3645,
 3646,
 3652,
 3653,
 3661,
 3663,
 3666,
 3669,
 3672,
 3675,
 3680,
 3682,
 3684,
 3685,
 3686,
 3687,
 3689,
 3693,
 3694,
 3702,
 3703,
 3704,
 3705,
 3706,
 3707,
 3708,
 3710,
 3711,
 3712,
 3713,
 4102,
 4104,
 4105,
 4107,
 4108,
 4109,
 4111,
 4113,
 4114,
 4119,
 4121,
 4126,
 4128,
 4129,
 4130,
 4133,
 4138,
 4142,
 4147,
 4160,
 4162,
 4167,
 4168,
 4172,
 4173,
 4174,
 4190,
 4195,
 4303,
 4306,
 4401,
 4402,
 4414,
 4415,
 4419,
 4429,
 4503,
 4510,
 4526,
 4533,
 4541,
 4557,
 4712,
 4714,
 4716,
 4721,
 4728,
 4735,
 4739,
 4743,
 4744,
 4746,
 4760,
 4807,
 4903,
 4906,
 4908,
 4909,
 4916,
 4927,
 4934,
 4939,
 4945,
 4953,
 4956,
 4960,
 4968,
 4971,
 4973,
 4974,
 4979,
 4991,
 4999,
 5009,
 5011,
 5014,
 5201,
 5202,
 5203,
 5227,
 5251,
 5263,
 5272,
 5289,
 5299,
 5314,
 5315,
 5324,
 5328,
 5351,
 5355,
 5356,
 5371,
 5381,
 5392,
 5398,
 5410,
 5425,
 5426,
 5434,
 5438,
 5443,
 5450,
 5452,
 5478,
 5481,
 5483,
 5487,
 5488,
 5490,
 5512,
 5521,
 5529,
 5604,
 5609,
 5701,
 5880,
 5905,
 6005,
 6015,
 6016,
 6104,
 6108,
 6111,
 6112,
 6116,
 6122,
 6123,
 6125,
 6126,
 6127,
 6129,
 6136,
 6143,
 6146,
 6147,
 6158,
 6160,
 6161,
 6164,
 6165,
 6167,
 6168,
 6169,
 6179,
 6180,
 6182,
 6186,
 6187,
 6189,
 6197,
 6207,
 6208,
 6214,
 6215,
 6216,
 6217,
 6220,
 6221,
 6223,
 6224,
 6226,
 6229,
 6233,
 6234,
 6237,
 6239,
 6243,
 6244,
 6246,
 6257,
 6261,
 6265,
 6266,
 6269,
 6282,
 6284,
 6404,
 6411,
 6432,
 6438,
 6441,
 6443,
 6449,
 6462,
 6485,
 6494,
 6498,
 6509,
 6533,
 6549,
 6558,
 6588,
 6591,
 6593,
 6672,
 6698,
 6703,
 6770,
 6797,
 6815,
 8011,
 8021,
 8027,
 8032,
 8033,
 8038,
 8039,
 8042,
 8049,
 8050,
 8054,
 8059,
 8064,
 8066,
 8069,
 8071,
 8074,
 8076,
 8081,
 8086,
 8088,
 8091,
 8096,
 8103,
 8107,
 8111,
 8112,
 8119,
 8121,
 8150,
 8163,
 8171,
 8176,
 8183,
 8213,
 8215,
 8222,
 8249,
 8255,
 8261,
 8271,
 8277,
 8287,
 8358,
 8383,
 8409,
 8443,
 8477,
 8489,
 8908,
 8916,
 8927,
 8935,
 8936,
 8996,
 9911,
 9912,
 9914,
 9917,
 9919,
 9935,
 9962]
pty_owings = [1217,
 1218,
 1219,
 1259,
 1309,
 1310,
 1314,
 1333,
 1336,
 1338,
 1340,
 1341,
 1419,
 1432,
 1464,
 1471,
 1503,
 1504,
 1507,
 1512,
 1516,
 1527,
 1528,
 1582,
 1604,
 1605,
 1609,
 1611,
 1701,
 1702,
 1713,
 1714,
 1718,
 1721,
 1723,
 1742,
 1760,
 1783,
 1786,
 1904,
 1907,
 2002,
 2020,
 2049,
 2102,
 2108,
 2233,
 2316,
 2323,
 2328,
 2329,
 2332,
 2337,
 2340,
 2344,
 2345,
 2353,
 2359,
 2365,
 2369,
 2371,
 2376,
 2379,
 2380,
 2401,
 2402,
 2404,
 2405,
 2406,
 2409,
 2419,
 2420,
 2426,
 2430,
 2431,
 2443,
 2455,
 2457,
 2458,
 2464,
 2478,
 2480,
 2484,
 2485,
 2486,
 2488,
 2498,
 2499,
 2506,
 2520,
 2530,
 2535,
 2538,
 2546,
 2601,
 2603,
 2612,
 2616,
 2636,
 2641,
 2705,
 2727,
 2801,
 2832,
 2841,
 2880,
 2883,
 2885,
 2889,
 2890,
 2891,
 2929,
 3004,
 3010,
 3018,
 3019,
 3023,
 3029,
 3033,
 3035,
 3036,
 3038,
 3041,
 3042,
 3046,
 3048,
 3049,
 3055,
 3057,
 3060,
 3118,
 3122,
 3128,
 3131,
 3149,
 3163,
 3169,
 3176,
 3205,
 3206,
 3211,
 3213,
 3218,
 3234,
 3236,
 3257,
 3260,
 3264,
 3268,
 3276,
 3284,
 3289,
 3290,
 3305,
 3311,
 3312,
 3317,
 3322,
 3323,
 3324,
 3325,
 3338,
 3356,
 3360,
 3363,
 3380,
 3390,
 3437,
 3450,
 3455,
 3465,
 3479,
 3483,
 3490,
 3498,
 3508,
 3519,
 3540,
 3545,
 3548,
 3550,
 3552,
 3556,
 3567,
 3588,
 3591,
 3593,
 3607,
 3622,
 3625,
 3632,
 3642,
 3645,
 3646,
 3661,
 3682,
 3686,
 3687,
 3689,
 3702,
 3708,
 3711,
 4109,
 4111,
 4114,
 4119,
 4121,
 4128,
 4133,
 4147,
 4162,
 4167,
 4168,
 4174,
 4306,
 4510,
 4526,
 4533,
 4541,
 4721,
 4735,
 4743,
 4746,
 4760,
 4807,
 4903,
 4909,
 4916,
 4934,
 4939,
 4953,
 4956,
 4960,
 4967,
 4968,
 4971,
 4973,
 4974,
 4979,
 4991,
 4995,
 4999,
 5009,
 5014,
 5201,
 5212,
 5227,
 5229,
 5263,
 5272,
 5289,
 5299,
 5324,
 5351,
 5356,
 5392,
 5410,
 5425,
 5438,
 5443,
 5452,
 5471,
 5478,
 5481,
 5488,
 5490,
 5521,
 5880,
 6104,
 6108,
 6116,
 6123,
 6125,
 6127,
 6129,
 6136,
 6143,
 6147,
 6158,
 6160,
 6164,
 6165,
 6167,
 6168,
 6169,
 6179,
 6180,
 6182,
 6186,
 6189,
 6197,
 6207,
 6215,
 6216,
 6217,
 6220,
 6223,
 6233,
 6237,
 6239,
 6243,
 6244,
 6257,
 6261,
 6269,
 6275,
 6411,
 6438,
 6441,
 6443,
 6449,
 6462,
 6485,
 6494,
 6533,
 6549,
 6591,
 6593,
 6698,
 8027,
 8033,
 8034,
 8039,
 8042,
 8049,
 8054,
 8064,
 8066,
 8069,
 8076,
 8081,
 8086,
 8096,
 8111,
 8121,
 8150,
 8163,
 8171,
 8176,
 8213,
 8222,
 8249,
 8255,
 8261,
 8271,
 8277,
 8287,
 8358,
 8383,
 8409,
 8908,
 8916,
 8927,
 8936,
 8996,
 9912,
 9914,
 9917,
 9918,
 9919,
 9935,
 9946,
 9960]
re_owings = [1216,
 1218,
 1310,
 1314,
 1333,
 1336,
 1338,
 1340,
 1341,
 1471,
 1512,
 1582,
 1604,
 1609,
 1714,
 1723,
 1742,
 1904,
 2002,
 2049,
 2102,
 2109,
 2233,
 2328,
 2337,
 2345,
 2359,
 2364,
 2365,
 2369,
 2380,
 2401,
 2406,
 2419,
 2420,
 2426,
 2443,
 2455,
 2464,
 2478,
 2498,
 2499,
 2506,
 2520,
 2530,
 2538,
 2546,
 2601,
 2603,
 2612,
 2616,
 2636,
 2705,
 2832,
 2880,
 2883,
 2885,
 2890,
 2929,
 3018,
 3019,
 3023,
 3029,
 3035,
 3036,
 3041,
 3048,
 3049,
 3060,
 3118,
 3122,
 3131,
 3163,
 3176,
 3206,
 3211,
 3236,
 3257,
 3260,
 3264,
 3276,
 3284,
 3290,
 3305,
 3311,
 3312,
 3322,
 3323,
 3324,
 3325,
 3356,
 3390,
 3437,
 3450,
 3455,
 3483,
 3498,
 3508,
 3540,
 3548,
 3550,
 3552,
 3556,
 3576,
 3593,
 3645,
 3646,
 3661,
 3682,
 3686,
 3687,
 3689,
 3708,
 4109,
 4121,
 4128,
 4147,
 4162,
 4168,
 4174,
 4306,
 4510,
 4526,
 4533,
 4721,
 4735,
 4743,
 4903,
 4909,
 4916,
 4934,
 4939,
 4956,
 4960,
 4968,
 4971,
 4974,
 4979,
 4991,
 4999,
 5201,
 5272,
 5289,
 5299,
 5356,
 5425,
 5478,
 5481,
 5490,
 5521,
 5880,
 6104,
 6108,
 6116,
 6125,
 6129,
 6143,
 6147,
 6158,
 6160,
 6164,
 6165,
 6168,
 6182,
 6186,
 6215,
 6216,
 6217,
 6223,
 6237,
 6239,
 6243,
 6257,
 6261,
 6411,
 6438,
 6443,
 6462,
 6485,
 6533,
 6593,
 8027,
 8054,
 8064,
 8076,
 8081,
 8085,
 8086,
 8096,
 8111,
 8150,
 8176,
 8213,
 8249,
 8255,
 8261,
 8271,
 8277,
 8287,
 8358,
 8383,
 8916,
 9912,
 9914]
cyc_owings = [1103,
 1217,
 1218,
 1305,
 1308,
 1309,
 1310,
 1314,
 1316,
 1338,
 1340,
 1432,
 1440,
 1443,
 1471,
 1503,
 1504,
 1507,
 1513,
 1516,
 1526,
 1527,
 1528,
 1570,
 1580,
 1582,
 1604,
 1605,
 1609,
 1611,
 1702,
 1707,
 1708,
 1711,
 1718,
 1721,
 1723,
 1732,
 1760,
 1783,
 1784,
 1786,
 1904,
 1907,
 2002,
 2020,
 2102,
 2108,
 2109,
 2211,
 2233,
 2246,
 2303,
 2313,
 2316,
 2323,
 2328,
 2329,
 2332,
 2337,
 2338,
 2340,
 2344,
 2353,
 2359,
 2365,
 2369,
 2371,
 2376,
 2380,
 2390,
 2401,
 2405,
 2406,
 2409,
 2420,
 2426,
 2430,
 2439,
 2442,
 2455,
 2457,
 2464,
 2478,
 2480,
 2484,
 2485,
 2486,
 2488,
 2498,
 2530,
 2535,
 2538,
 2547,
 2603,
 2605,
 2607,
 2612,
 2616,
 2618,
 2636,
 2641,
 2705,
 2727,
 2758,
 2801,
 2832,
 2834,
 2841,
 2883,
 2885,
 2890,
 2913,
 2929,
 3010,
 3018,
 3019,
 3023,
 3024,
 3027,
 3029,
 3033,
 3035,
 3036,
 3041,
 3042,
 3048,
 3049,
 3050,
 3056,
 3057,
 3060,
 3118,
 3122,
 3128,
 3149,
 3163,
 3169,
 3176,
 3205,
 3206,
 3211,
 3213,
 3236,
 3260,
 3264,
 3268,
 3276,
 3288,
 3289,
 3290,
 3305,
 3311,
 3312,
 3317,
 3321,
 3322,
 3323,
 3325,
 3338,
 3356,
 3363,
 3380,
 3390,
 3437,
 3450,
 3455,
 3479,
 3483,
 3490,
 3494,
 3498,
 3499,
 3508,
 3540,
 3545,
 3550,
 3552,
 3556,
 3563,
 3567,
 3588,
 3591,
 3593,
 3607,
 3615,
 3627,
 3642,
 3645,
 3646,
 3682,
 3686,
 3687,
 3689,
 3702,
 3704,
 3707,
 3708,
 3710,
 4105,
 4108,
 4109,
 4111,
 4114,
 4121,
 4128,
 4130,
 4133,
 4147,
 4160,
 4162,
 4167,
 4168,
 4172,
 4173,
 4174,
 4306,
 4510,
 4526,
 4533,
 4541,
 4721,
 4735,
 4739,
 4743,
 4744,
 4746,
 4903,
 4909,
 4916,
 4934,
 4939,
 4945,
 4953,
 4956,
 4960,
 4967,
 4971,
 4974,
 4979,
 5009,
 5011,
 5212,
 5227,
 5263,
 5272,
 5289,
 5299,
 5351,
 5356,
 5392,
 5410,
 5425,
 5426,
 5438,
 5452,
 5471,
 5478,
 5481,
 5488,
 5490,
 5529,
 5880,
 6104,
 6108,
 6111,
 6116,
 6125,
 6127,
 6129,
 6143,
 6147,
 6158,
 6161,
 6165,
 6167,
 6169,
 6179,
 6180,
 6189,
 6197,
 6207,
 6215,
 6220,
 6221,
 6223,
 6233,
 6234,
 6237,
 6239,
 6243,
 6244,
 6257,
 6261,
 6265,
 6266,
 6269,
 6284,
 6289,
 6404,
 6411,
 6432,
 6438,
 6441,
 6443,
 6449,
 6462,
 6470,
 6485,
 6492,
 6494,
 6498,
 6549,
 6558,
 6588,
 6591,
 6593,
 6672,
 6698,
 6703,
 6770,
 6788,
 6797,
 6815,
 8021,
 8027,
 8032,
 8033,
 8039,
 8042,
 8049,
 8054,
 8066,
 8069,
 8071,
 8076,
 8086,
 8096,
 8104,
 8111,
 8119,
 8121,
 8150,
 8163,
 8171,
 8176,
 8213,
 8222,
 8249,
 8255,
 8261,
 8271,
 8277,
 8299,
 8358,
 8383,
 8436,
 8477,
 8489,
 8916,
 8927,
 8935,
 8936,
 8996,
 9912,
 9917,
 9919,
 9935,
 9946,
 9962]

owings = dict(youren = youren_owings, pty = pty_owings, re = re_owings, cyc = cyc_owings) 


#產生持有情形的字典
own_situation = {}


for q in check_list:
    result_list = []
    for p,li in owings.items():
        if q in li:
            result_list.append(1)
        else:
            result_list.append(0)
    own_situation[q] = result_list
            

df = pd.DataFrame.from_dict(own_situation, orient='index',columns=['youren', 'pty', 're', 'cyc'])

df2 = pd.concat([new, df], axis=1) # axis=0 as default
df2 = df2.round()

st.dataframe(df2)

 # Same as st.write(df)






